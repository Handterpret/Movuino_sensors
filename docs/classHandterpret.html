<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Handterpret-Movuino_sensors: Handterpret Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Handterpret-Movuino_sensors
   &#160;<span id="projectnumber">0.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classHandterpret-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Handterpret Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classHandterpret.html" title="Handterpret class.">Handterpret</a> class.  
 <a href="classHandterpret.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Handterpret_8h_source.html">Handterpret.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a451f49b98f6aa61da29d52abaa7734d7"><td class="memItemLeft" align="right" valign="top"><a id="a451f49b98f6aa61da29d52abaa7734d7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a451f49b98f6aa61da29d52abaa7734d7">Handterpret</a> ()</td></tr>
<tr class="memdesc:a451f49b98f6aa61da29d52abaa7734d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:a451f49b98f6aa61da29d52abaa7734d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36dbddde82265390e1a5dfe4d050ee6"><td class="memItemLeft" align="right" valign="top"><a id="ab36dbddde82265390e1a5dfe4d050ee6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ab36dbddde82265390e1a5dfe4d050ee6">~Handterpret</a> ()</td></tr>
<tr class="memdesc:ab36dbddde82265390e1a5dfe4d050ee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br /></td></tr>
<tr class="separator:ab36dbddde82265390e1a5dfe4d050ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab807d3b7273cfd6859fd9134cd2409d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ab807d3b7273cfd6859fd9134cd2409d7">get_metrics</a> (float(&amp;metrics)[6])</td></tr>
<tr class="memdesc:ab807d3b7273cfd6859fd9134cd2409d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill metrics with current accelerometer and gyroscope measured values.  <a href="classHandterpret.html#ab807d3b7273cfd6859fd9134cd2409d7">More...</a><br /></td></tr>
<tr class="separator:ab807d3b7273cfd6859fd9134cd2409d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7cd673f8c29dd245fbc01c8c18d4d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a2b7cd673f8c29dd245fbc01c8c18d4d9">update</a> (float metrics[6])</td></tr>
<tr class="memdesc:a2b7cd673f8c29dd245fbc01c8c18d4d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update metrics with accelerometer and gyroscope and handle movement detection.  <a href="classHandterpret.html#a2b7cd673f8c29dd245fbc01c8c18d4d9">More...</a><br /></td></tr>
<tr class="separator:a2b7cd673f8c29dd245fbc01c8c18d4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23f5886f6ca28a248d1612ec79b4f94"><td class="memItemLeft" align="right" valign="top"><a id="ab23f5886f6ca28a248d1612ec79b4f94"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ab23f5886f6ca28a248d1612ec79b4f94">display_metrics</a> ()</td></tr>
<tr class="memdesc:ab23f5886f6ca28a248d1612ec79b4f94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display Accelerometer and Gyroscope values. <br /></td></tr>
<tr class="separator:ab23f5886f6ca28a248d1612ec79b4f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a73f2902efac89763a2dae236d2ddc4cb"><td class="memItemLeft" align="right" valign="top"><a id="a73f2902efac89763a2dae236d2ddc4cb"></a>
const byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a73f2902efac89763a2dae236d2ddc4cb">HISTORY_SIZE</a> = 20</td></tr>
<tr class="memdesc:a73f2902efac89763a2dae236d2ddc4cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of measures stored per period. <br /></td></tr>
<tr class="separator:a73f2902efac89763a2dae236d2ddc4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0bc3d2d2e59b0e1853159dad10a3e80"><td class="memItemLeft" align="right" valign="top"><a id="ad0bc3d2d2e59b0e1853159dad10a3e80"></a>
const byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ad0bc3d2d2e59b0e1853159dad10a3e80">PERIOD_DURATION</a> = 100</td></tr>
<tr class="memdesc:ad0bc3d2d2e59b0e1853159dad10a3e80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time in ms, each period : rotation and translation status update. <br /></td></tr>
<tr class="separator:ad0bc3d2d2e59b0e1853159dad10a3e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238de6937077f938a674b69d2d9dda43"><td class="memItemLeft" align="right" valign="top"><a id="a238de6937077f938a674b69d2d9dda43"></a>
const byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a238de6937077f938a674b69d2d9dda43">ROTATION_SENSIBILITY</a> = 35</td></tr>
<tr class="memdesc:a238de6937077f938a674b69d2d9dda43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotation differentiel which define rotation movement. <br /></td></tr>
<tr class="separator:a238de6937077f938a674b69d2d9dda43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a0d1e8172ffd901bbd1d191220904a"><td class="memItemLeft" align="right" valign="top"><a id="a06a0d1e8172ffd901bbd1d191220904a"></a>
const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a06a0d1e8172ffd901bbd1d191220904a">ACCELERATION_SENSIBILITY</a> = 2000</td></tr>
<tr class="memdesc:a06a0d1e8172ffd901bbd1d191220904a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acceleration differentiel which define translation movement. <br /></td></tr>
<tr class="separator:a06a0d1e8172ffd901bbd1d191220904a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedea1d0cae0e1b512654f3e28fa26810"><td class="memItemLeft" align="right" valign="top"><a id="aedea1d0cae0e1b512654f3e28fa26810"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#aedea1d0cae0e1b512654f3e28fa26810">StartTime</a></td></tr>
<tr class="memdesc:aedea1d0cae0e1b512654f3e28fa26810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time in ms, monitor time between each period. <br /></td></tr>
<tr class="separator:aedea1d0cae0e1b512654f3e28fa26810"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a77ee5627d4d0f9aef66f6a835eee48e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a77ee5627d4d0f9aef66f6a835eee48e6">print_rotation</a> (byte rot, byte axis)</td></tr>
<tr class="memdesc:a77ee5627d4d0f9aef66f6a835eee48e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display detected rotation movement (exemple : supination, extension...)  <a href="classHandterpret.html#a77ee5627d4d0f9aef66f6a835eee48e6">More...</a><br /></td></tr>
<tr class="separator:a77ee5627d4d0f9aef66f6a835eee48e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79eab5184f9959909df6dd667fe485a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a79eab5184f9959909df6dd667fe485a2">print_translation</a> (byte acc, byte axis)</td></tr>
<tr class="memdesc:a79eab5184f9959909df6dd667fe485a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display detected translation movement (exemple : forward, left...)  <a href="classHandterpret.html#a79eab5184f9959909df6dd667fe485a2">More...</a><br /></td></tr>
<tr class="separator:a79eab5184f9959909df6dd667fe485a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6ab3fe072af42573e0c720698e90ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a7d6ab3fe072af42573e0c720698e90ae">check_movement</a> ()</td></tr>
<tr class="memdesc:a7d6ab3fe072af42573e0c720698e90ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update rot and trans status and display when movement is detected.  <a href="classHandterpret.html#a7d6ab3fe072af42573e0c720698e90ae">More...</a><br /></td></tr>
<tr class="separator:a7d6ab3fe072af42573e0c720698e90ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ee9fb1d50515a2f69df370a19a65a7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ac3ee9fb1d50515a2f69df370a19a65a7">average_historic</a> (float hist[<a class="el" href="classHandterpret.html#a73f2902efac89763a2dae236d2ddc4cb">HISTORY_SIZE</a>])</td></tr>
<tr class="memdesc:ac3ee9fb1d50515a2f69df370a19a65a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the average of last period measured values.  <a href="classHandterpret.html#ac3ee9fb1d50515a2f69df370a19a65a7">More...</a><br /></td></tr>
<tr class="separator:ac3ee9fb1d50515a2f69df370a19a65a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e58c8c47a1ed99a2a34a5d95a084d5"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a86e58c8c47a1ed99a2a34a5d95a084d5">detect_rotation_mov</a> (float av_gyro, float prev_av_gyro)</td></tr>
<tr class="memdesc:a86e58c8c47a1ed99a2a34a5d95a084d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what is the actual state of the rotation movement.  <a href="classHandterpret.html#a86e58c8c47a1ed99a2a34a5d95a084d5">More...</a><br /></td></tr>
<tr class="separator:a86e58c8c47a1ed99a2a34a5d95a084d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba68925a92f3c97b0bbbdf181d4a256"><td class="memItemLeft" align="right" valign="top">byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#afba68925a92f3c97b0bbbdf181d4a256">detect_translation_mov</a> (int16_t acc_val)</td></tr>
<tr class="memdesc:afba68925a92f3c97b0bbbdf181d4a256"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if there is a translation movement.  <a href="classHandterpret.html#afba68925a92f3c97b0bbbdf181d4a256">More...</a><br /></td></tr>
<tr class="separator:afba68925a92f3c97b0bbbdf181d4a256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6134318d863936b27376ff7cdb02b4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#aa6134318d863936b27376ff7cdb02b4c">discrimine_rotation</a> (byte current_rot_state[3])</td></tr>
<tr class="memdesc:aa6134318d863936b27376ff7cdb02b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the most likely movement made.  <a href="classHandterpret.html#aa6134318d863936b27376ff7cdb02b4c">More...</a><br /></td></tr>
<tr class="separator:aa6134318d863936b27376ff7cdb02b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a46535b151d0e9981225ceccca3f1e648"><td class="memItemLeft" align="right" valign="top"><a id="a46535b151d0e9981225ceccca3f1e648"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a46535b151d0e9981225ceccca3f1e648">Acc</a> [3]</td></tr>
<tr class="memdesc:a46535b151d0e9981225ceccca3f1e648"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accelerometer values, axis = 0:x, 1:y, 2:z. <br /></td></tr>
<tr class="separator:a46535b151d0e9981225ceccca3f1e648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ea45664c43d25a528ab63c8f5f9eec"><td class="memItemLeft" align="right" valign="top"><a id="a30ea45664c43d25a528ab63c8f5f9eec"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a30ea45664c43d25a528ab63c8f5f9eec">Gyro</a> [3]</td></tr>
<tr class="memdesc:a30ea45664c43d25a528ab63c8f5f9eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gyroscope values, axis = 0:x, 1:y, 2:z. <br /></td></tr>
<tr class="separator:a30ea45664c43d25a528ab63c8f5f9eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac465652afbb84f214ddceabfe3f46501"><td class="memItemLeft" align="right" valign="top"><a id="ac465652afbb84f214ddceabfe3f46501"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ac465652afbb84f214ddceabfe3f46501">hist_Gyro</a> [3][<a class="el" href="classHandterpret.html#a73f2902efac89763a2dae236d2ddc4cb">HISTORY_SIZE</a>]</td></tr>
<tr class="memdesc:ac465652afbb84f214ddceabfe3f46501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store period rotation measures. <br /></td></tr>
<tr class="separator:ac465652afbb84f214ddceabfe3f46501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289ef8fd0b450eb0e2864661980542db"><td class="memItemLeft" align="right" valign="top"><a id="a289ef8fd0b450eb0e2864661980542db"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a289ef8fd0b450eb0e2864661980542db">prev_av_Gyro</a> [3]</td></tr>
<tr class="memdesc:a289ef8fd0b450eb0e2864661980542db"><td class="mdescLeft">&#160;</td><td class="mdescRight">store previous average gyroscope <br /></td></tr>
<tr class="separator:a289ef8fd0b450eb0e2864661980542db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e6472a0b2131140eea7c0f1f32257c"><td class="memItemLeft" align="right" valign="top"><a id="ab2e6472a0b2131140eea7c0f1f32257c"></a>
byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#ab2e6472a0b2131140eea7c0f1f32257c">rot_state</a> [3]</td></tr>
<tr class="memdesc:ab2e6472a0b2131140eea7c0f1f32257c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotation state, 0 = not moving, 1 = negative rotation; 2 = positive rotation. <br /></td></tr>
<tr class="separator:ab2e6472a0b2131140eea7c0f1f32257c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac8a398707ef0cbb11109ad5aa0b51d"><td class="memItemLeft" align="right" valign="top"><a id="a7ac8a398707ef0cbb11109ad5aa0b51d"></a>
byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a7ac8a398707ef0cbb11109ad5aa0b51d">trans_state</a> [3]</td></tr>
<tr class="memdesc:a7ac8a398707ef0cbb11109ad5aa0b51d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translation state, 0 = not moving, 1 = negative translation; 2 = positive translation. <br /></td></tr>
<tr class="separator:a7ac8a398707ef0cbb11109ad5aa0b51d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aace86f2c2b3f3d002da562f836d755"><td class="memItemLeft" align="right" valign="top"><a id="a6aace86f2c2b3f3d002da562f836d755"></a>
byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHandterpret.html#a6aace86f2c2b3f3d002da562f836d755">hist_index</a></td></tr>
<tr class="memdesc:a6aace86f2c2b3f3d002da562f836d755"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the current position in the hist_gyro array. <br /></td></tr>
<tr class="separator:a6aace86f2c2b3f3d002da562f836d755"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classHandterpret.html" title="Handterpret class.">Handterpret</a> class. </p>
<p>This class stores MPU sensor values. It aims to process these metrics to detect forearm movements. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac3ee9fb1d50515a2f69df370a19a65a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3ee9fb1d50515a2f69df370a19a65a7">&#9670;&nbsp;</a></span>average_historic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Handterpret::average_historic </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>hist</em>[HISTORY_SIZE]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the average of last period measured values. </p>
<ul>
<li>hist 1d array of sensor values </li>
</ul>

</div>
</div>
<a id="a7d6ab3fe072af42573e0c720698e90ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6ab3fe072af42573e0c720698e90ae">&#9670;&nbsp;</a></span>check_movement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::check_movement </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update rot and trans status and display when movement is detected. </p>
<p>Calculate average rotation from historic, detect if rotation and gyroscope status have significatively changed since last period and update their status. Display movement detected with <a class="el" href="classHandterpret.html#a79eab5184f9959909df6dd667fe485a2" title="Display detected translation movement (exemple : forward, left...)">print_translation()</a> and <a class="el" href="classHandterpret.html#aa6134318d863936b27376ff7cdb02b4c" title="Determine the most likely movement made.">discrimine_rotation()</a> if a movement status changed </p>

</div>
</div>
<a id="a86e58c8c47a1ed99a2a34a5d95a084d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e58c8c47a1ed99a2a34a5d95a084d5">&#9670;&nbsp;</a></span>detect_rotation_mov()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">byte Handterpret::detect_rotation_mov </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>av_gyro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>prev_av_gyro</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what is the actual state of the rotation movement. </p>
<p>Compare previous and current average for one gyroscope axis. If it exceeds defined threshold ROTATION_SENSIBILITY it returns 1 for a negative rotation, 2 for a positive rotation. </p><ul>
<li>av_gyro for the current period : average gyroscope value </li>
<li>prev_av_gyro for the last period : average gyroscope value </li>
</ul>

</div>
</div>
<a id="afba68925a92f3c97b0bbbdf181d4a256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afba68925a92f3c97b0bbbdf181d4a256">&#9670;&nbsp;</a></span>detect_translation_mov()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">byte Handterpret::detect_translation_mov </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>acc_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if there is a translation movement. </p>
<p>Detect if <code>acc_val</code> exceeds ACCELERATION_SENSIBILITY for one accelerometer axis. It returns 1 for a negative translation, 2 for a positive translation. </p><ul>
<li>acc_val current accelaration value </li>
</ul>

</div>
</div>
<a id="aa6134318d863936b27376ff7cdb02b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6134318d863936b27376ff7cdb02b4c">&#9670;&nbsp;</a></span>discrimine_rotation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::discrimine_rotation </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>current_rot_state</em>[3]</td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the most likely movement made. </p>
<p>Due to physical restriction and sensor noise, the movement made is not always easy to determine. Some movements (especially flexion and extension) triggers sometimes multiple axis. This function prioritize some of the axis , order was was done empirically. Order : supination/pronation &gt; flexion/extension &gt; adduction/abduction </p><ul>
<li>current_rot_state array of current rotation status </li>
</ul>

</div>
</div>
<a id="ab807d3b7273cfd6859fd9134cd2409d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab807d3b7273cfd6859fd9134cd2409d7">&#9670;&nbsp;</a></span>get_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::get_metrics </td>
          <td>(</td>
          <td class="paramtype">float(&amp;)&#160;</td>
          <td class="paramname"><em>metrics</em>[6]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill metrics with current accelerometer and gyroscope measured values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metrics</td><td>the array filled with acc and gyro values </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77ee5627d4d0f9aef66f6a835eee48e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ee5627d4d0f9aef66f6a835eee48e6">&#9670;&nbsp;</a></span>print_rotation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::print_rotation </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>rot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>axis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display detected rotation movement (exemple : supination, extension...) </p>
<ul>
<li>rot Rotation state </li>
<li>axis = 0:x, 1:y, 2:z </li>
</ul>

</div>
</div>
<a id="a79eab5184f9959909df6dd667fe485a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79eab5184f9959909df6dd667fe485a2">&#9670;&nbsp;</a></span>print_translation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::print_translation </td>
          <td>(</td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>acc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>axis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Display detected translation movement (exemple : forward, left...) </p>
<ul>
<li>acc Acceleration state </li>
<li>axis = 0:x, 1:y, 2:z </li>
</ul>

</div>
</div>
<a id="a2b7cd673f8c29dd245fbc01c8c18d4d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b7cd673f8c29dd245fbc01c8c18d4d9">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Handterpret::update </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>metrics</em>[6]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update metrics with accelerometer and gyroscope and handle movement detection. </p>
<p>This function updates acc and gyro of handterpret class with metrics harvested from MPU6050. Then for each period, it launchs the <a class="el" href="classHandterpret.html#a7d6ab3fe072af42573e0c720698e90ae" title="Update rot and trans status and display when movement is detected.">check_movement()</a> function that updates rotation and translation status. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metrics</td><td>the new metrics measured. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Movuino_sensors/<a class="el" href="Handterpret_8h_source.html">Handterpret.h</a></li>
<li>Movuino_sensors/Handterpret.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
